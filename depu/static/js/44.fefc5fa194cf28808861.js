webpackJsonp([44],{COTy:function(e,t){},t2ad:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("1oBE"),s=Object(o.a)(),n={data:function(){return{newCon:"",myHeaders:{token:s},imgUrl:"",ruleForm:{bannerId:null,note:"",coverImg:"",linkUrl:""},rules:{coverImg:[{required:!0,message:"请选择封面图片",trigger:"blur"}],linkUrl:[{required:!0,message:"请填写链接",trigger:"blur"}],note:[{required:!0,message:"请输入备注信息",trigger:"blur"}]}}},mounted:function(){var e=this;this.ruleForm.bannerId=this.$route.params.bannerId,console.log(this.ruleForm.bannerId),this.$request.getDetailsSliper({id:this.ruleForm.bannerId}).then(function(t){console.log(t),e.ruleForm=t.result,e.imgUrl=e.$global.baseUrl2+t.result.coverImg})},beforeDestroy:function(){},methods:{dealBusData:function(e){console.log(e)},getMyTime:function(e){return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())+".000"},backPeonyPage:function(){this.$router.push({name:"sliperManagement"})},catchData:function(e){console.log(e)},change:function(e){this.newCon=e,this.ruleForm.content=this.newCon},submit:function(){console.log(this.newCon),this.ruleForm.content=this.newCon},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e?(console.log(t.ruleForm),t.$request.addSliper(t.ruleForm).then(function(e){200==e.code?(t.$message({showClose:!0,message:"编辑成功！",type:"success",duration:3e3}),t.$router.push({name:"sliperManagement"})):t.$message({showClose:!0,message:"编辑失败！",type:"error",duration:3e3})}).catch(function(e){t.$message({showClose:!0,message:"编辑失败！",type:"error",duration:3e3})})):t.$message({showClose:!0,message:"请检查信息填写的完整性！",type:"error",duration:3e3})})},resetForm:function(e){this.$refs[e].resetFields(),this.imgUrl="",this.$message({showClose:!0,message:"信息重置成功！",type:"success",duration:3e3})},handleAvatarSuccess:function(e,t){"SUCCESS"==e.state?this.ruleForm.coverImg=e.url:(this.$message.error("图片上传失败，请稍后重试！"),this.ruleForm.thumbnail="")},handleError:function(e,t){this.$message.error("图片上传失败，请稍后重试！")},handleRemove:function(e){this.ruleForm.coverImg="",this.imgUrl=""},beforeAvatarUpload:function(e){var t=window.URL||window.webkitURL;this.imgUrl=t.createObjectURL(e);var r="image/jpeg"===e.type,o=e.size/1024/1024<2;return r||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&o}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"addAnnouncement",attrs:{id:"addAnnouncement"}},[r("fei-bread",[e._v("\n    首页轮播管理\n    "),r("i",{staticClass:"el-icon-d-arrow-right"}),e._v(" "),r("span",{staticClass:"current-text"},[e._v("编辑轮播")])]),e._v(" "),r("el-card",{staticClass:"card"},[r("p",{staticClass:"backPeony"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-back"},on:{click:e.backPeonyPage}},[e._v("返回上一级")])],1),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"轮播图片",prop:"coverImg"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$global.baseUrl2+"/file/upload",headers:e.myHeaders,name:"upfile","show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-error":e.handleError,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUpload}},[e.imgUrl?r("img",{staticClass:"avatar",attrs:{src:e.imgUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"链接",prop:"linkUrl"}},[r("el-input",{model:{value:e.ruleForm.linkUrl,callback:function(t){e.$set(e.ruleForm,"linkUrl",t)},expression:"ruleForm.linkUrl"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"备注",prop:"note"}},[r("el-input",{model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var l=r("VU/8")(n,a,!1,function(e){r("COTy")},"data-v-65649d10",null);t.default=l.exports}});