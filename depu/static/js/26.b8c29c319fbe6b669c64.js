webpackJsonp([26],{"689k":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"aiTest",data:function(){return{input:"",tag:!1,tableData:[],pageInfo:{pageNum:1,pageSize:10},totalSize:10,currentPage4:1,timer:null}},created:function(){this.pageInfo.pageNum=this.$route.params.pageNum?this.$route.params.pageNum:1,this.pageInfo.pageSize=this.$route.params.pageSize?this.$route.params.pageSize:10,console.log(this.pageInfo),this.getData({})},methods:{getData:function(t){var e=this;this.Loading=!0,this.$request.getAiTestTableData({keyWords:this.input,pageNum:this.pageInfo.pageNum,pageSize:this.pageInfo.pageSize}).then(function(t){if(console.log(t),200==t.code&&t.result){e.tableData=t.result.content,e.totalSize=t.result.totalSize,e.pageInfo.pageNum=t.result.pageNum,console.log(t.result.content,"我是表格的数据。。。"),e.Loading=!1;try{if(t.result.content[0].totalCount===t.result.content[0].testedCount)return;console.log(t.result.content[0].totalCount===t.result.content[0].testedCount,"是否相等"),e.timer||(e.timer=setTimeout(function(){e.getData({}),e.timer=null,console.log("我把timer清空了")},5e3))}catch(t){console.log(t,"if报错")}}else clearInterval(e.timer),e.Loading=!1,e.$message({showClose:!0,message:"未获取到数据！",type:"warning",duration:3e3})}).catch(function(t){clearInterval(e.timer),e.Loading=!1,e.$message({showClose:!0,message:"服务器出错哦！",type:"error",duration:3e3})})},handleSee:function(t,e){this.$router.push({name:"lookTest",params:{roomId:e.batchId,pageNum:this.pageInfo.pageNum,pageSize:this.pageInfo.pageSize}})},handleEdit:function(t,e){this.$store.commit("setRowInfo",e),this.$router.push({name:"editActivityInfo"})},handleDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该赛事信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$request.activityDelete({id:e.activityId}).then(function(t){200==t.code?(a.$message({type:"success",message:"删除成功!"}),a.getData()):a.$message({type:"waring",message:"删除失败!"})}).catch(function(t){a.$message({type:"waring",message:"删除失败!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pageInfo.pageSize=t,this.tag||(this.input=""),this.getData()},handleCurrentChange:function(t){console.log("当前页: "+t),this.pageInfo.pageNum=t,this.tag||(this.input=""),this.getData()},addAnnouncement:function(){this.$router.push({name:"addTest"})},refresh:function(){this.getData()},searchByKeywords:function(){this.pageInfo.pageNum=1,this.tag=!0,this.getData()},search:function(){this.tag=!1}},beforeDestroy:function(){clearInterval(this.timer)}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"aitest",attrs:{id:"aitest"}},[a("fei-bread",[t._v("AI对抗测试")]),t._v(" "),a("el-card",[a("div",{staticClass:"tool"},[a("div",{staticClass:"tool-left"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.addAnnouncement}},[t._v("添加测试")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:t.refresh}},[t._v("刷新")])],1),t._v(" "),a("div",{staticClass:"tool-right"},[a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入关键字进行搜索",clearable:""},on:{input:t.search},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-aim"},on:{click:t.searchByKeywords}},[t._v("查询")])],1)]),t._v(" "),a("el-table",{staticClass:"tableCon",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:"","header-cell-style":{backgroundColor:"#F3F3F3",color:"#000"}}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"batchName",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"roomCount",label:"房间人数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalCount",label:"测试总次数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"testedCount",label:"已测组数"}}),t._v(" "),a("el-table-column",{attrs:{label:"待测组数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1==isNaN(e.row.totalCount-e.row.testedCount)?"-":e.row.totalCount-e.row.testedCount))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(null===e.row.startDate?"-":e.row.startDate.split(".")[0]))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"endDate",label:"结束时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(null===e.row.endDate?"-":e.row.endDate.split(".")[0]))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[new Date(e.row.startDate).getTime()<(new Date).getTime()?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleSee(e.$index,e.row)}}},[t._v("查看")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"paginationBlock"},[a("el-pagination",{attrs:{"current-page":this.pageInfo.pageNum,"page-sizes":[10,20,30,40],"page-size":this.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,o,!1,function(t){a("Z8lB"),a("dpmL")},"data-v-dedb2166",null);e.default=s.exports},Z8lB:function(t,e){},dpmL:function(t,e){}});