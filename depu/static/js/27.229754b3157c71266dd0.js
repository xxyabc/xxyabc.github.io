webpackJsonp([27],{"8H8Q":function(t,e){},"pNg+":function(t,e){},qro7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),o=a("NYxO"),s={name:"userManagement",data:function(){return{tag:!1,input:"",tableData:[],pageInfo:{pageNum:1,pageSize:10},totalSize:10,currentPage4:1,bathDelArr:[]}},mounted:function(){this.getData()},methods:i()({},Object(o.b)(["setActivityId"]),{getData:function(t){var e=this;this.Loading=!0,this.$request.searchActivity({keyWords:this.input,pageNum:this.pageInfo.pageNum,pageSize:this.pageInfo.pageSize}).then(function(t){console.log(t),200==t.code?(e.tableData=t.result.content,e.tableData.forEach(function(t){t.title=t.title.split("##")[0]}),e.totalSize=t.result.totalSize,e.pageInfo.pageNum=t.result.pageNum,e.Loading=!1):(e.Loading=!1,e.$message({showClose:!0,message:"未获取到数据！",type:"warning",duration:3e3}))}).catch(function(t){e.Loading=!1,e.$message({showClose:!0,message:"服务器出错哦！",type:"error",duration:3e3})})},handleSee:function(t,e){console.log(e.activityId,"我是往vuex中存储的activityId"),this.setActivityId(e.activityId),this.$router.push({name:"lookActivityInfo",params:{activityId:e.activityId}})},handleSerchPlayer:function(t,e){this.setActivityId(e.activityId),this.$router.push({name:"serchPlayer",params:{activityId:e.activityId}})},handleEdit:function(t,e){this.$store.commit("setRowInfo",e),this.$router.push({name:"editActivityInfo"})},handleDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该赛事信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$request.activityDelete({id:e.activityId}).then(function(t){200==t.code?(a.$message({type:"success",message:"删除成功!"}),a.getData()):a.$message({type:"waring",message:"删除失败!"})}).catch(function(t){a.$message({type:"waring",message:"删除失败!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSelectionChange:function(t){this.bathDelArr=t.map(function(t){return t.activityId})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pageInfo.pageSize=t,this.pageInfo.pageNum=1,this.tag||(this.input=""),this.getData()},handleCurrentChange:function(t){console.log("当前页: "+t),this.pageInfo.pageNum=t,this.tag||(this.input=""),this.getData()},addAnnouncement:function(){this.$router.push({name:"addActivityInfo"})},bathDel:function(){var t=this;this.$confirm("此操作将永久删除这些赛事, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$request.activityBatchDelete(t.bathDelArr).then(function(e){200==e.code?(t.$message({type:"success",message:"删除成功!"}),t.getData()):t.$message({type:"error",message:"删除失败!"})}).catch(function(e){t.$message({type:"error",message:"删除失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},searchByKeywords:function(){this.pageInfo.pageNum=1,this.tag=!0,this.getData()},search:function(){this.tag=!1}})},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userManagement",attrs:{id:"userManagement"}},[a("fei-bread",[t._v("赛事公告")]),t._v(" "),a("el-card",[a("div",{staticClass:"tool"},[a("div",{staticClass:"tool-left"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.addAnnouncement}},[t._v("添加赛事")]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.bathDel}},[t._v("批量删除")])],1),t._v(" "),a("div",{staticClass:"tool-right"},[a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入关键字进行搜索",clearable:""},on:{input:t.search},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-aim"},on:{click:t.searchByKeywords}},[t._v("查询")])],1)]),t._v(" "),a("el-table",{staticClass:"tableCon",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:"","header-cell-style":{backgroundColor:"#F3F3F3",color:"#000"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"赛事名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deadline",label:"报名截止日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.deadline.split(".")[0]))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"活动开始日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.startDate.split(".")[0]))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"endDate",label:"活动结束日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.endDate.split(".")[0]))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"modifiedDate",label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.modifiedDate.split(".")[0]))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"top",label:"是否置顶",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.top?"是":"否"))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"handlingTime",label:"已报名人数/可报名人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.participantedCount||0)+"/"+t._s(e.row.participantCount||0))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[(new Date).getTime()<new Date(e.row.deadline).getTime()?a("span",[t._v("报名中")]):(new Date).getTime()>new Date(e.row.startDate).getTime()&&(new Date).getTime()<new Date(e.row.endDate).getTime()?a("span",[t._v("已开始")]):(new Date).getTime()>new Date(e.row.endDate)?a("span",[t._v("已结束")]):a("span",[t._v("已发布")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"roomPlayerCount",label:"房间人数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作",width:"330px"},scopedSlots:t._u([{key:"default",fn:function(e){return[new Date(e.row.startDate).getTime()<(new Date).getTime()?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleSee(e.$index,e.row)}}},[t._v("详情")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleSerchPlayer(e.$index,e.row)}}},[t._v("报名用户")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"paginationBlock"},[a("el-pagination",{attrs:{"current-page":this.pageInfo.pageNum,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(t){a("8H8Q"),a("pNg+")},"data-v-b8eb7e82",null);e.default=r.exports}});