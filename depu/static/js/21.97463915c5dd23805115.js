webpackJsonp([21],{CZGk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"competition",components:{NewList:a("cMoA").a},data:function(){return{newList:[],currentPage:1,pageSize:10,total:0,nowlang:""}},created:function(){this.nowlang=window.sessionStorage.getItem("lang")||"cn",this.serchNeswList()},methods:{goDetial:function(t){this.$router.push({name:"newsDetail",query:{id:t,type:"competition"}})},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.serchNeswList()},handleCurrentChange:function(t){this.currentPage=t,this.serchNeswList()},serchNeswList:function(){var t=this;this.$request.serchActivity({pageNum:this.currentPage,pageSize:this.pageSize}).then(function(e){if(console.log(e),"200"==e.data.code){var a=e.data.result.content;a.forEach(function(e){e.createDate=e.createDate.split(" ")[0],e.startDate=t.$common.getFullTime(e.startDate),e.deadline=t.$common.getFullTime(e.deadline),e.id=e.activityId,e.title="cn"==t.nowlang?e.title.split("##")[0]:e.title.split("##")[1],e.summary="cn"==t.nowlang?e.summary.split("##")[0]:e.summary.split("##")[1]}),t.newList=a,t.total=e.data.result.totalSize}})},participantActive:function(t){var e=this;this.$confirm(this.$gettext("确认报名该赛事么？"),this.$gettext("提示"),{confirmButtonText:this.$gettext("确定"),cancelButtonText:this.$gettext("取消"),type:"warning"}).then(function(){e.$request.participantActivity(t).then(function(t){console.log(t),"200"==t.data.code?(e.$message.success(e.$gettext("报名成功！")),e.serchNeswList()):e.$message.error(t.data.msg)})}).catch(function(){})}}},i={render:function(){var t=this.$createElement;return(this._self._c||t)("NewList",{attrs:{type:"competition",newList:this.newList,showImg:!0,showViews:!1,showAuthor:!1,showContent:!0,total:this.total},on:{SizeChange:this.handleSizeChange,pageChange:this.handleCurrentChange,serchDetail:this.goDetial,participant:this.participantActive}})},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("ZFX7")},"data-v-edcecc2c",null);e.default=n.exports},ZFX7:function(t,e){},cMoA:function(t,e,a){"use strict";var s={name:"news",props:["type","newList","total","showImg","showAuthor","showViews","showContent"],data:function(){return{currentPage:1,pageSize:10}},created:function(){console.log(this.newList)},methods:{handleSizeChange:function(t){console.log(t),this.pageSize=t,this.currentPage=1,this.$emit("SizeChange",t)},handleCurrentChange:function(t){console.log(t),this.currentPage=t,this.$emit("pageChange",t)},getDetail:function(t){this.$emit("serchDetail",t)},participant:function(t){this.$emit("participant",t)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"news-box"},[a("ul",{staticClass:"news-list"},t._l(t.newList,function(e){return a("li",{key:e.articleId},[a("div",{on:{click:function(a){return t.getDetail(e.id)}}},[t.showImg?a("el-image",{staticClass:"coverImg",attrs:{src:t.$global.baseUrl2+e.thumbnail,alt:""}}):t._e()],1),t._v(" "),a("p",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showContent,expression:"showContent"}],staticClass:"content",style:{height:"news"==t.type?"0.85rem":"0.55rem"}},[t._v(t._s(e.summary))]),t._v(" "),"competition"!==t.type?a("div",{staticClass:"foot"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.showAuthor,expression:"showAuthor"}],staticClass:"date"},[t._v(t._s(e.authorName))]),t._v(" "),a("span",{staticClass:"date"},[a("i",{staticClass:"el-icon-date"}),t._v("\n          "+t._s(e.createDate)+"\n        ")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.showViews,expression:"showViews"}],staticClass:"view"},[a("i",{staticClass:"el-icon-view"}),t._v("\n          "+t._s(e.views)+"\n        ")]),t._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:"download"==t.type,expression:"type == 'download'"}],staticClass:"download-btn el-button btn el-button--primary el-button--medium",attrs:{href:e.resourceUrl?t.$global.baseUrl2+e.resourceUrl:"javascript:;",target:"_blank"}},[t._v(t._s(t.$gettext("下载")))]),t._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:"download"==t.type&&e.resourcePdfUrl,expression:"type == 'download' && item.resourcePdfUrl"}],staticClass:"pdf-btn el-button btn el-button--warning el-button--medium",attrs:{href:e.resourcePdfUrl?t.$global.baseUrl2+e.resourcePdfUrl:"javascript:;",target:"_blank"}},[t._v(t._s(t.$gettext("预览")))])]):a("div",{staticClass:"foot-com"},[a("p",{staticClass:"start"},[a("i",{staticClass:"el-icon-alarm-clock"}),t._v("\n          "+t._s(t.$gettext("活动开始："))+t._s(e.startDate)+"\n        ")]),t._v(" "),a("div",[a("p",{staticClass:"end"},[a("i",{staticClass:"el-icon-alarm-clock"}),t._v("\n            "+t._s(t.$gettext("报名截止："))+t._s(e.deadline)+"\n          ")]),t._v(" "),a("p",{staticClass:"operation"},[a("span",[t._v(t._s(t.$gettext("已报名"))+t._s(e.participantedCount)+t._s(t.$gettext("人")))]),t._v(" "),e.participantCount>e.participantedCount?a("el-button",{staticClass:"btn",attrs:{size:"medium",disabled:new Date(e.deadline).getTime()<(new Date).getTime()||e.participanted,type:Number((new Date).getTime())>Number(new Date(e.deadline).getTime())?"info":"success"},on:{click:function(a){return t.participant(e.id)}}},[t._v(t._s(e.participanted?t.$gettext("已报名"):Number((new Date).getTime())>Number(new Date(e.deadline).getTime())?t.$gettext("报名已截止"):t.$gettext("我要报名")))]):a("el-button",{staticClass:"btn",attrs:{type:"warning",size:"medium",disabled:!0}},[t._v(t._s(t.$gettext("报名人数已满")))])],1)])])])}),0),t._v(" "),a("el-pagination",{staticClass:"page",attrs:{background:"","current-page":t.currentPage,"page-sizes":[1,10,30,50],"page-size":t.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("joim")},"data-v-4e28c08e",null);e.a=n.exports},joim:function(t,e){}});