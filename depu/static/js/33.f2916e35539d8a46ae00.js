webpackJsonp([33],{"01Xf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"editionManagement",data:function(){return{input:"",tableData:[],tag:!1,pageInfo:{pageNum:1,pageSize:10},addForm:{title:"",tag:"",createDate:"",desc:"",desc_en:""},addFormRule:{title:[{required:!0,message:"请输入版本名",trigger:"blur"},{min:1,max:20,message:"用户名字符在 1 到 15 个字符",trigger:"blur"}],tag:[{required:!0,message:"请输入修改类型",trigger:"blur"}],createDate:[{required:!0,message:"请输入修改时间",trigger:"blur"}],desc:[{required:!0,message:"请输入版本中文描述",trigger:"blur"}],desc_en:[{required:!0,message:"请输入版本英文描述",trigger:"blur"}]},totalSize:10,currentPage4:1,bathDelArr:[],dialogAddUser:!1,options:[{value:"修复",label:"修复"},{value:"迭代",label:"迭代"},{value:"上线",label:"上线"},{value:"小功能",label:"小功能"}]}},mounted:function(){this.getData()},methods:{getData:function(e){var t=this;this.Loading=!0,this.$request.getSystemTableData({keyWords:this.input,pageNum:this.pageInfo.pageNum,pageSize:this.pageInfo.pageSize}).then(function(e){200==e.code?(t.tableData=e.result.content,t.tableData.forEach(function(e){e.desc=e.desc.replace(/<br\s*\/?>/g,"; ")}),t.totalSize=e.result.totalSize,console.log(e),t.Loading=!1):(t.Loading=!1,t.$message({showClose:!0,message:"未获取到数据！",type:"warning",duration:3e3}))}).catch(function(e){t.Loading=!1,t.$message({showClose:!0,message:"服务器出错哦！",type:"error",duration:3e3})})},addDialogConfirm:function(){var e=this;this.$refs.addForm.validate(function(t){t?(e.addForm.desc=e.addForm.desc.replace(/\n/g,"<br/>")+"##"+e.addForm.desc_en.replace(/\n/g,"<br/>"),e.addForm.createDate+=" 00:00:00.000",e.$request.creatSystem(e.addForm).then(function(t){200==t.code?(e.$message({showClose:!0,message:"添加成功！",type:"success",duration:3e3}),e.$refs.addForm.resetFields(),e.getData(),e.dialogAddUser=!1):(e.dialogAddUser=!1,e.$message({showClose:!0,message:"添加失败",type:"error",duration:3e3}))}).catch(function(t){e.dialogAddUser=!1,e.$message({showClose:!0,message:"服务器出错哦！",type:"error",duration:3e3})})):e.$message({showClose:!0,message:"请检查您填写的信息是否有误！",type:"error",duration:3e3})})},handleSelectionChange:function(e){this.bathDelArr=e,console.log(e)},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该版本信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$request.delSystem({id:t.versionId}).then(function(e){200==e.code?(a.$message({type:"success",message:"删除成功!"}),a.getData()):a.$message({type:"waring",message:"删除失败!"})}).catch(function(e){a.$message({type:"waring",message:"删除失败!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageInfo.pageSize=e,this.pageInfo.pageNum=1,this.tag||(this.input=""),this.getData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.pageNum=e,this.tag||(this.input=""),this.getData()},bathDel:function(){var e=this;0!=this.bathDelArr.length?this.$confirm("此操作将永久删除版本信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.bathDelArr.forEach(function(e){t.push(e.versionId)}),console.log(t),e.$request.bathDelSystem(t).then(function(t){200==t.code?(e.$message({type:"success",message:"删除成功!"}),e.getData()):e.$message({type:"error",message:"删除失败!"})}).catch(function(t){e.$message({type:"error",message:"删除失败!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请选需要删除的版本",type:"warning",duration:1e3})},searchByKeywords:function(){this.pageInfo.pageNum=1,this.tag=!0,this.getData()},cancel:function(e){this.$refs[e].resetFields(),this.dialogAddUser=!1},search:function(){this.tag=!1}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userManagement",attrs:{id:"userManagement"}},[a("fei-bread",[e._v("版本日志管理")]),e._v(" "),a("el-card",[a("div",{staticClass:"tool"},[a("div",{staticClass:"tool-left"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){e.dialogAddUser=!0}}},[e._v("添加版本")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.bathDel}},[e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"tool-right"},[a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入关键字进行搜索",clearable:""},on:{input:e.search},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-aim"},on:{click:e.searchByKeywords}},[e._v("查询")])],1)]),e._v(" "),a("el-table",{staticClass:"tableCon",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"","header-cell-style":{backgroundColor:"#F3F3F3",color:"#000"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"版本号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tag",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createDate.split(".")[0].split(" ")[0]))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"版本中文描述",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.desc.split("##")[0]))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"desc_en",label:"版本英文描述",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.desc.split("##")[1]))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"paginationBlock"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.pageNum,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.dialogAddUser},on:{"update:visible":function(t){e.dialogAddUser=t}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[e._v("添加版本信息")]),e._v(" "),a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRule,"label-position":"right","label-width":"120px"}},[a("el-form-item",{attrs:{label:"版本号",prop:"title"}},[a("el-input",{attrs:{width:"50px",autocomplete:"off"},model:{value:e.addForm.title,callback:function(t){e.$set(e.addForm,"title",t)},expression:"addForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"修改类型",prop:"tag"}},[a("el-select",{attrs:{width:"50px",placeholder:"请选择"},model:{value:e.addForm.tag,callback:function(t){e.$set(e.addForm,"tag",t)},expression:"addForm.tag"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"修改日期",prop:"createDate"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.addForm.createDate,callback:function(t){e.$set(e.addForm,"createDate",t)},expression:"addForm.createDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本中文描述",prop:"desc"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:6},autocomplete:"off"},model:{value:e.addForm.desc,callback:function(t){e.$set(e.addForm,"desc",t)},expression:"addForm.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本英文描述",prop:"desc_en"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:6},autocomplete:"off"},model:{value:e.addForm.desc_en,callback:function(t){e.$set(e.addForm,"desc_en",t)},expression:"addForm.desc_en"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancel("addForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addDialogConfirm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,o,!1,function(e){a("8byf"),a("juXS")},"data-v-58a1b1bd",null);t.default=n.exports},"8byf":function(e,t){},juXS:function(e,t){}});