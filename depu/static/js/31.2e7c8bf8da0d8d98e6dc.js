webpackJsonp([31],{"Gy/I":function(e,t){},NsIi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"userManagement",data:function(){return{input:"",tableData:[{title:"-",authorName:"-",startDate:"-",endDate:"-",modifiedDate:"-",top:"-",views:"-"}],tag:!1,pageInfo:{pageNum:1,pageSize:10},totalSize:10,currentPage4:1,bathDelArr:[]}},mounted:function(){this.getData()},methods:{getData:function(e){var t=this;this.Loading=!0,this.$request.searchNews({keyWords:this.input,type:"news",pageNum:this.pageInfo.pageNum,pageSize:this.pageInfo.pageSize}).then(function(e){console.log(e),200==e.code?(t.tableData=e.result.content,t.totalSize=e.result.totalSize,t.pageInfo.pageNum=e.result.pageNum,t.Loading=!1):(t.Loading=!1,t.$message({showClose:!0,message:"未获取到数据！",type:"warning",duration:3e3}))}).catch(function(e){t.Loading=!1,t.$message({showClose:!0,message:"服务器出错哦！",type:"error",duration:3e3})})},handleEdit:function(e,t){this.$router.push({name:"editNews",params:{articleId:t.articleId}})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该新闻信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$request.deleteNews({id:t.articleId}).then(function(e){200==e.code?(a.$message({type:"success",message:"删除成功!"}),a.getData()):a.$message({type:"waring",message:"删除失败!"})}).catch(function(e){a.$message({type:"waring",message:"删除失败!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageInfo.pageSize=e,this.pageInfo.pageNum=1,this.tag||(this.input=""),this.getData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.pageNum=e,this.tag||(this.input=""),this.getData()},addAnnouncement:function(){this.$router.push({name:"addNews"})},selectRow:function(e){this.bathDelArr=e.map(function(e){return e.articleId}),console.log(this.bathDelArr)},bathDel:function(){var e=this;this.$confirm("此操作将永久删除该批量用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$request.bathDelNews(e.bathDelArr).then(function(t){200==t.code?(e.$message({type:"success",message:"删除成功!"}),e.getData()):e.$message({type:"error",message:"删除失败!"})}).catch(function(t){e.$message({type:"error",message:"删除失败!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},searchByKeywords:function(){this.pageInfo.pageNum=1,this.tag=!0,this.getData()},search:function(){this.tag=!1}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userManagement",attrs:{id:"userManagement"}},[a("fei-bread",[e._v("新闻内容管理")]),e._v(" "),a("el-card",[a("div",{staticClass:"tool"},[a("div",{staticClass:"tool-left"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addAnnouncement}},[e._v("添加新闻")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.bathDel}},[e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"tool-right"},[a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入关键字进行搜索",clearable:""},on:{input:e.search},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-aim"},on:{click:e.searchByKeywords}},[e._v("查询")])],1)]),e._v(" "),a("el-table",{staticClass:"tableCon",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"","header-cell-style":{backgroundColor:"#F3F3F3",color:"#000"}},on:{"selection-change":e.selectRow}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"新闻标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"authorName",label:"新闻作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"authorName",label:"发布者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"modifiedDate",label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.modifiedDate.split(".")[0]))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"top",label:"是否置顶"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.top?"是":"否"))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"views",label:"操作",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"paginationBlock"},[a("el-pagination",{attrs:{"current-page":this.pageInfo.pageNum,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,s,!1,function(e){a("yIZ4"),a("Gy/I")},"data-v-7c4c508a",null);t.default=i.exports},yIZ4:function(e,t){}});