webpackJsonp([37],{"+oZb":function(e,t){},A2H8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"userManagement",data:function(){return{input:"",tag:!1,downloadHref:"",tableData:[{num:"-",name:"-",playerCount:"-",createDate:"-",tested:"-"}],pageInfo:{pageNum:1,pageSize:10},totalSize:10,currentPage4:1,bathDelArr:[]}},created:function(){this.pageInfo.pageNum=this.$route.params.pageNum?this.$route.params.pageNum:1,this.pageInfo.pageSize=this.$route.params.pageSize?this.$route.params.pageSize:10,this.getData()},computed:{getBatType:function(e,t){return e}},methods:{getData:function(e){var t=this;this.Loading=!0,this.$request.searchMatch({keyWords:this.input,pageNum:this.pageInfo.pageNum,pageSize:this.pageInfo.pageSize}).then(function(e){if(console.log(e),200==e.code){t.tableData=e.result.content,t.totalSize=e.result.totalSize;var a=t.bathDelArr.length?t.bathDelArr.join(","):"";t.downloadHref=t.$global.baseUrl2+"/game/exportByRoomIds/"+t.pageInfo.pageNum+"/"+t.pageInfo.pageSize+"?keyWords="+t.input+(a?"&roomIds="+a:""),t.pageInfo.pageNum=e.result.pageNum,t.Loading=!1}else t.Loading=!1,t.$message({showClose:!0,message:"未获取到数据！",type:"warning",duration:3e3})}).catch(function(e){t.Loading=!1,t.$message({showClose:!0,message:"服务器出错哦！",type:"error",duration:3e3})})},handleSee:function(e,t){this.$router.push({name:"lookMatchReport",params:{roomId:t.roomId,name:t.name,num:t.num,playerCount:t.playerCount,botCount:t.botCount,pageNum:this.pageInfo.pageNum,pageSize:this.pageInfo.pageSize}})},handleSelectionChange:function(e){console.log(e),this.bathDelArr=e.map(function(e){return e.roomId});var t=this.bathDelArr.length?this.bathDelArr.join(","):"";console.log(t),this.downloadHref=this.$global.baseUrl2+"/game/exportByRoomIds/"+this.pageInfo.pageNum+"/"+this.pageInfo.pageSize+"?keyWords="+this.input+(t?"&roomIds="+t:"")},bathDel:function(){var e=this;this.$confirm("此操作将永久删除该批量对战记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$request.bachDelMatch(e.bathDelArr).then(function(t){200==t.code?(e.$message({type:"success",message:"删除成功!"}),e.getData()):e.$message({type:"error",message:"删除失败!"})}).catch(function(t){e.$message({type:"error",message:"删除失败!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该条对战记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$request.delMatch({id:t.roomId}).then(function(e){200==e.code?(a.$message({type:"success",message:"删除成功!"}),a.getData()):a.$message({type:"error",message:"删除失败!"})}).catch(function(e){a.$message({type:"error",message:"删除失败!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageInfo.pageNum=1,this.pageInfo.pageSize=e,this.tag||(this.input=""),this.getData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pageInfo.pageNum=e,this.tag||(this.input=""),this.getData()},addAnnouncement:function(){this.$router.push({name:"addTest"})},searchByKeywords:function(){this.pageInfo.pageNum=1,this.tag=!0,this.getData()},search:function(){this.tag=!1}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"aitest",attrs:{id:"aitest"}},[a("fei-bread",[e._v("对战记录")]),e._v(" "),a("el-card",[a("div",{staticClass:"tool"},[a("div",{staticClass:"tool-left"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.bathDel}},[e._v("批量删除")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"导出本页数据",placement:"right"}},[a("a",{staticClass:"el-button el-button--primary",attrs:{href:e.downloadHref}},[a("i",{staticClass:"el-icon-download"}),e._v("\n            批量导出\n          ")])])],1),e._v(" "),a("div",{staticClass:"tool-right"},[a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入关键字进行搜索",clearable:""},on:{input:e.search},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-aim"},on:{click:e.searchByKeywords}},[e._v("查询")])],1)]),e._v(" "),a("el-table",{staticClass:"tableCon",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"","header-cell-style":{backgroundColor:"#F3F3F3",color:"#000"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"房间号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"房间名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"playerCount",label:"房间人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(null===t.row.createDate?"-":t.row.createDate.split(".")[0]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"对战类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[parseInt(t.row.botCount)?parseInt(t.row.botCount)===parseInt(t.row.playerCount)?a("span",[e._v("AI对战")]):parseInt(t.row.playerCount)>parseInt(t.row.botCount)&&parseInt(t.row.botCount)>=1?a("span",[e._v("人机对战")]):a("span",[e._v("-")]):a("span",[e._v("人人对战")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleSee(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"paginationBlock"},[a("el-pagination",{attrs:{"current-page":this.pageInfo.pageNum,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,o,!1,function(e){a("+oZb"),a("FaGu")},"data-v-0265a0d0",null);t.default=s.exports},FaGu:function(e,t){}});